# DevTales - рассказы разработчиков
#### Back-end составляющая веб блога для разработчиков.
При создании проекта использованы технологии:
> Spring Boot - упрощение и автоматизация конфигурирования приложения,
>
> Spring Security - аутентификация, настройка авторизации и прав пользователей,
>
> Spring Data JPA - доступ к данным и управление ими,
>
> Spring Data REST - управление ресурсами,
>
> MySQL - база данных,
>
> FlyWay - версионирование и миграции базы данных,
>
> Lombok - сокращение кода
>
> Thymeleaf - web шаблонизатор
>
> Maven - сборщик проекта
>
> MockMVC

Требования к окружению и компонентам проекта:

|                         |         Ограничение         |
|------------------------:|:---------------------------:|
|              Версия JDK |           11 и выше         |
| Система контроля версий |             Git             |
|      Версия Spring Boot |            2.6.х            |
|             База данных |           MySQL 8           |
|         Сборщик проекта |            Maven            |
|           Тестирование  |       JUnit 4 или 5         |



#### Описание
![N|Solid](https://res.cloudinary.com/devtales/image/upload/c_scale,w_600/v1644228078/Screenshot_3_chwoe0.png)
##### Главная страница
На главной странице блока отображаются все прошедшие модерацию посты. Посты разделены по вкладкам: новые, самые обсуждаемые, лучшие, старые с соответсвующей сортировкой.
![N|Solid](https://res.cloudinary.com/devtales/image/upload/v1644231887/Screenshot_4_u93urp.png)
##### ТЕМЫ
В блоке ТЕМЫ отображаются теги из постов. Переход по тегу выводит посты, содержащие данный тег.

![N|Solid](https://res.cloudinary.com/devtales/image/upload/c_scale,h_200/v1644231997/Screenshot_5_aau1df.png)
##### Календарь
Во вкладке календарь отображена история публикации постов. Из календаря можно перейти к поставм, опубликованным в конкретную дату.

![N|Solid](https://res.cloudinary.com/devtales/image/upload/c_scale,h_200/v1644232105/Screenshot_6_eoc5if.png)
##### Регистрация и авторизация
Регстрация пользователя осуществляется по email и паролю. Для определения человека используется капча.
Вход в систему осуществляется при помощи почтового ящика и пароля.
##### Публикация постов и комментарии
Публикация постов и комментирование доступны только авторизованным пользователям. При создании поста или комментария доступно добавление изображения.
##### Оценка поста
Авторизованный пользователь может поставить положительную (like) или отрицательную (dislike) оценку публикации
##### Млодератор
Если статус пользователя - "модератор", то пользователь видит список постов, доступных для модерации, может утверждать или отклонять посты для публикации. Так же модератор может изменять глобальные настройки блока.
##### Восстановление пароля
Восстановление пароля осуществляется путем отправки письма, содержащего сгенерированную ссылку, на почтовый ящик пользователя.
##### Статистика
На странице статистики отображается общая статистическая инфрормация по блогу (количество постов, просмторов, лайков, дизлайков, дата первой публикации) и личная статистика, для авторизованного пользователя.

##### Глобальные настройки блога:
* Многопользовательский режим
  Режим включает/отключает возможность регистрации новых пользователей.
* Премодерация постов
  Если настройка отключена, то посты публикуются без предварительной проверки модератором, иначе пост требует проверки.
* Показывать статистику блога всем
* Отображение статистики блока.

#### Запуск приложения
Для локального запуска приложения необходимо:
Подготовить окружение:

```bash
$ cp .env_example .env
```

Задать необходимые значения переменным
- `JDBC_DATABASE_URL*` путь к базе данных с параметрами
- `JDBC_DATABASE_USERNAME*` пользователь
- `JDBC_DATABASE_PASSWORD*` пароль доступа к БД
- `BASIC_URL*` любой сервис генерации изображений. Например: https://robohash.org/
- `AVATAR_CONFIG*` парметры генерации изображения. Для robohash.org/ пример =.png?size=360x360&set=set
- `CLOUD_NAME*` имя облака на cloudinary
- `API_KEY*` ключ для cloudinary
- `API_SECRET*` секретный ключ cloudinary
- `MAIL_HOST*` хост почтового сервиса
- `MAIL_USERNAME*` почтовый ящик для отправки сообщений
- `MAIL_PASSWORD*` пароль от почтового ящика
- `MAIL_PORT*` =465
- `MAIL_PROTOCOL*` =smtps

в файле `.env`.

Запустить приложение с нужными переменными окружения:

```bash
$ set -a; . ./.env; java -jar target/devtales.jar; set +a
```

Или в IntelliJ IDEA:
добавить в настройки конфигурации файл с переменными среды окружения
`Edit Configuration / EnvFile / Enable EnvFile / + .env`.

Поект развернут на сервисе Heroku.
- [DevTales] - Рассказы разработчиков

  [![Build Status](https://res.cloudinary.com/devtales/image/upload/c_scale,w_96/v1644232738/1_oybKF55Eqkaq1bo-tMRNqg_znhrrg.jpg)](https://maruchek-blogengine-java.herokuapp.com/)



> Alexandr Maruchek alexandr.maruchek@gmail.com


[DevTales]: <https://maruchek-blogengine-java.herokuapp.com/>